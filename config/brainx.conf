# BrainX v2 Configuration
# config/brainx.conf

# === BRAINX HOME ===
# Note: BRAINX_HOME is set by the main CLI before loading this config

# === STORAGE TIERS ===
STORAGE_HOT_DIR="$BRAINX_HOME/storage/hot"
STORAGE_WARM_DIR="$BRAINX_HOME/storage/warm"
STORAGE_COLD_DIR="$BRAINX_HOME/storage/cold"

# === RAG CONFIGURATION ===
RAG_INDEX_DIR="$BRAINX_HOME/rag-index"
RAG_THRESHOLD=0.7

# === SCORING CONFIGURATION ===
SCORE_THRESHOLD=70
SCORE_WEIGHT_CONTENT=0.6
SCORE_WEIGHT_CONTEXT=0.3
SCORE_WEIGHT_TAGS=0.1

# === RELEVANCE SCORING (Optimizer) ===
RELEVANCE_THRESHOLD=70
RELEVANCE_WEIGHT_KEYWORD=0.3
RELEVANCE_WEIGHT_SEMANTIC=0.5
RELEVANCE_WEIGHT_STRUCTURE=0.2
OPTIMAL_LENGTH=500

# === COMPRESSION (Optimizer) ===
COMPRESS_ENABLED=true
COMPRESS_THRESHOLD=5000
COMPRESS_RATIO=0.4
SEMANTIC_COMPRESS=true           # Enable semantic compression for large contexts

# === HISTORY MANAGEMENT (Optimizer) ===
MAX_HISTORY_MESSAGES=20
MAX_HISTORY_TOKENS=100000
REMOVE_DUPLICATES=true
KEEP_SYSTEM=true
KEEP_LAST_N=5

# === CACHING (Optimizer) ===
CACHE_ENABLED=true
CACHE_PREFIX="[CACHED_SYSTEM]"
CACHE_THRESHOLD=10000
CACHE_TTL=3600

# Response Caching
RESPONSE_CACHE_ENABLED=true      # Cache LLM responses for identical queries
SEMANTIC_CACHE=true              # Enable fuzzy matching for cache hits
SIMILARITY_THRESHOLD=0.85        # Similarity threshold for semantic cache

# === BATCHING ===
BATCH_ENABLED=true
BATCH_MIN_TOOLS=2
BATCH_MAX_TOOLS=10

# === LOCAL MODEL COMPRESSION ===
LOCAL_COMPRESS_ENABLED=false     # DISABLED by default - too slow for real-time
# Si quieres probar, cambia a true y usa un modelo más rápido:
# LOCAL_MODEL=phi3:mini          # Opción más capaz (3.8B)
# LOCAL_MODEL=qwen2.5:0.5b       # Opción ultra rápida (0.5B)
LOCAL_MODEL=llama3.2-32k:latest  # NO RECOMENDADO: 3B lento e impreciso
LOCAL_MAX_TOKENS=2000
LOCAL_TEMPERATURE=0.1
OLLAMA_HOST=http://localhost:11434

# === CONTEXT SUMMARIZATION ===
SUMMARIZER_ENABLED=true          # Enable progressive summarization
SUMMARIZE_AFTER_N=10             # Summarize after N messages
SUMMARY_MAX_TOKENS=300           # Max tokens per summary
KEEP_MESSAGES_AFTER_SUMMARY=5    # Keep N recent messages unsummarized

# === SEMANTIC DEDUPLICATION ===
DEDUP_ENABLED=true               # Remove semantically similar content
DEDUP_METHOD=hybrid              # hash, ngram, semantic, or hybrid
SIMILARITY_THRESHOLD=0.85        # Similarity threshold (0.0-1.0)
MIN_CONTENT_LENGTH=50            # Min content length to check for dupes

# === TOKEN BUDGET & COST ===
TOKEN_BUDGET=150000
WARNING_THRESHOLD=100000

# MiniMax M2.1 Pricing (per 1M tokens in cents)
COST_INPUT=0.15
COST_OUTPUT=0.60
COST_CACHE_READ=0.02
COST_CACHE_WRITE=0.10

# === VERBOSE MODE ===
VERBOSE=false

# === COLORS ===
# Note: Colors are defined in the main CLI (readonly)

# === DATABASE CONFIGURATION ===
BRAINX_DB="postgresql://brainx:brainx@localhost:5432/brainx_v2"
DB_ENABLED=true

# === ENABLED MODULES ===
OPTIMIZE_SYSTEM=true
OPTIMIZE_HISTORY=true
OPTIMIZE_MEMORIES=true
OPTIMIZER_ENABLED=true
